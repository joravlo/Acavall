<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>{{event.name}}</title>
    <!-- Latest compiled and minified CSS -->
    <script src="{{ asset('js/event.js') }}"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.6/css/all.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="{{ asset('css/event.css') }}">
    <!-- jQuery library -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <!-- Latest compiled JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true"></script>

  </head>
  <body onload="showMap('{{event.address}}');">

    <div class="container-fluid" style="margin-top:0px; padding:0px; z-index:3; position:fixed;">

      <nav class="navbar navbar-expand-sm justify-content-between" style="background:#c8c22f;">
        <a class="navbar-brand" href="{{path('acavall_homepage')}}">
          <img src="{{asset('img/logoNav.png')}}" alt="logotipo aCavall" style="width:110px;">
        </a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#collapsibleNavbar">
          <span class="navbar-toggler-icon"></span>
        </button>
        <form class="form-inline">
          {% if is_granted('ROLE_ADMIN') %}
            <a class="s my-2 my-sm-0" href="{{path('acavall_gestor')}}" style="color:white; text-decoration:none; margin-right:10px;">Gestor</a>
          {% endif %}
          <a class="s my-2 my-sm-0" href="{{path('acavall_register')}}" style="color:white; text-decoration:none; margin-right:10px;">Unete!</a>
        </form>
      </nav>

    </div>

    <div class="container-fluid containerBackground">

      <div class="container-fluid" style="margin-top:0px; margin-bottom:20px; padding:0px; z-index:3;">
        <nav class="navbar navbar-expand-sm justify-content-between" style="background:#c8c22f;">
          <a class="navbar-brand" href="{{path('acavall_homepage')}}">
            <img src="img/logoNav.png" alt="logotipo aCavall" style="width:110px;">
          </a>
          <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#collapsibleNavbar">
            <span class="navbar-toggler-icon"></span>
          </button>
          <form class="form-inline">
            {% if is_granted('ROLE_ADMIN') %}
              <a class="s my-2 my-sm-0" href="{{path('acavall_gestor')}}" style="color:white; text-decoration:none; margin-right:10px;">Gestor</a>
            {% endif %}
            <a class="s my-2 my-sm-0" href="{{path('acavall_register')}}" style="color:white; text-decoration:none; margin-right:10px;">Unete!</a>
          </form>
        </nav>
      </div>

    </div>

    <div class="containerInfo">
      <div class="container">
        <div class="row">
          {% if event.video is null %}
            <img class="col-md-8 headerEvent img-fluid" src="{{asset('img/imagesEvents/' ~ event.image)}}" alt="Imagen del evento">
          {% else %}
          {% set youtube_header = 'https://www.youtube.com/watch?v=' %}
          {% set youtube_embed_header = 'https://www.youtube.com/embed/' %}
          <iframe  class="col-md-8 headerEvent" src="{{event.video|replace({(youtube_header): youtube_embed_header})}}?autoplay=1&controls=0&showinfo=0" frameborder="0"></iframe>
          {% endif %}
          <div class="col-md-4 headerDetail">
            <p class="titleMonth">{{event.date|date('M')}}</p>
            <p class="titleDayMonth">{{event.date|date('d')}}</p>
            <h2>{{event.name}}</h2>
            <p class="titlePrice">{{event.price}}€</p>
            {% if event.actualCapacity == 0 %}
            <a href=""><button class="btn btnBuy btn-lg"type="button" name="button"  style="pointer-events: none;">AGOTADO</button></a>
            {% else %}
            {% set idUser = 'notUser' %}
              {% if app.user %}
              {% set idUser = app.user.id %}
              {% endif %}
              <a href="{{path('acavall_buy',{ 'id': event.id, 'iduser': idUser })}}"><button class="btn btnBuy btn-lg"type="button" name="button">COMPRAR</button></a>
            {% endif %}

          </div>
        </div>
        <div class="row containerDetail">
          <div class="col-md-8 containerDescription">

              <h5>DESCRIPCIÓN</h5>
              <p>{{event.description}}</p>

              <h5 style="margin-top:50px;">CATEGORIAS</h5>

              <div class="containerCategory">
                {% for category in event.categories %}
                <span class="textCategory">{{category.name}}</span>
                {% endfor %}
              </div>

              <h5>COMPARTELO CON TUS AMIGOS</h5>
              <div class="">
                <a href="http://www.facebook.com/sharer.php?u=localhost:8000{{ path(app.request.attributes.get('_route'),app.request.attributes.get('_route_params')) }}" target="_blank"><i class="fa fa-facebook" title="Compartir en facebook"></i></a>
                <a href="http://twitter.com/share?url=localhost:8000{{ path(app.request.attributes.get('_route'),app.request.attributes.get('_route_params')) }}"target="_blank">
                 <i class="fa fa-twitter" title="Compartir en twitter"></i> </a>
              </div>
          </div>

          <div class="col-md-4">
              <div class="card" style="background: white;">
                <div class="containerCardInfo row">
                    <div class="col-md-2">
                      <i class="fas fa-map-marker-alt" style="font-size:24px; color: #828B91;"></i>
                    </div>
                    <div class="col-md-10">
                      <div class="cardInfoRow">
                        <p>{{event.date|date('l,d \\d\\e F \\d\\e Y')}}</p>
                        <p>{{event.date|date('H:i')}}</p>
                      </div>
                    </div>
                </div>
                <div class="containerCardInfo row">
                  <div class="col-md-2">
                    <i class="far fa-clock"></i>
                  </div>
                  <div class="col-md-10">
                    <div class="cardInfoRow">
                      <p>{{event.localName}}</p>
                      <p class="textAddress">{{event.address}}</p>
                    </div>
                  </div>
                </div>
                <div id="mapContainer">

                </div>
              </div>
          </div>
        </div>
      </div>

      <div class="container">

      {% if eventsCategory is defined %}

        <div>
          <h3 class="textOtherEvents"> Otros eventos que podrían interesarte</h3>
        </div><br>

        {% for eventCategory in eventsCategory %}
          <div class="card cardFormat">

            <div class="contImg">
              <img class="card-img-top" width="100px" height="130px" onerror="this.src='{{asset('img/acavall.jpg')}}';" src="{{asset('img/imagesEvents/' ~ eventCategory.image)}}" alt="Imagen card evento">
            </div>

            <div class="card-block">
              <p id="eveName"><b>{{ eventCategory.name }}</b></p>

              <div id="contCard" class="container">

                <div class="row" style="margin-bottom:5px">
                  <div class="col-md-4 text-center">
                    <div id="month">{{ eventCategory.date|date('M') }}</div>
                    <div id="day">  {{ eventCategory.date|date('d') }}</div>
                  </div>
                  <div class="col-md-8" style="font-size:14px;">
                    <p style="margin-bottom:0px;"><i style="color:grey;" class="far fa-money-bill-alt"></i> &nbsp; desde <b>{{ eventCategory.price }} €</b></p>
                    <p><i style="color:grey;" class="fas fa-map-marker"></i> &nbsp;{{ eventCategory.address }}</p>
                  </div>
                </div>

                <div class="row">
                  <div class="col-md-5 text-center" style="padding-top:8px;">
                    <a style="color:#c8c22f; text-decoration:none;"
                       href="{{ path('acavall_event',{ 'eventId': eventCategory.id }) }}">
                       VER MAS
                    </a>
                  </div>
                  <div class="col-md-7 text-center">
                    {% if eventCategory.actualCapacity == 0 %}
                    <a href="" class="btn btnC" width="100px"  style="pointer-events: none;">AGOTADO</a>
                    {% else %}
                    {% set idUser = 'notUser' %}
                      {% if app.user %}
                      {% set idUser = app.user.id %}
                      {% endif %}
                      <a href="{{path('acavall_buy',{ 'id': eventCategory.id, 'iduser': idUser })}}" class="btn btnC" width="100px">COMPRAR</a>
                    {% endif %}

                  </div>
                </div>

              </div>
            </div>
          </div>
        {% endfor %}
      {% endif %}
      </div>

      <footer class="container-fluid text-center" style="margin-top:20px; background:grey; padding:20px;">
        <div class="row" style="color:white">
          <div class="col-md-4 offset-md-2">
            <h4>Contacto</h4>
            <p>
              tlf. 692 03 89 30 <br>
              info@fundacionacavall.com
            </p>
          </div>
          <div class="col-md-4">
            <h4>Redes Sociales</h4>
            <a class="btn btn-social-icon btn-twitter">
              <span class="fa fa-twitter"></span>
            </a>
            <a class="btn btn-social-icon btn-facebook">
              <span class="fa fa-facebook"></span>
            </a>
            <a class="btn btn-social-icon btn-instagram">
              <span class="fa fa-instagram"></span>
            </a>
          </div>
        </div>
      </footer>
    </div>

  </body>
</html>
